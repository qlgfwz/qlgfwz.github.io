<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤šæ ¼å¼ä»£ç åŠ å¯†å·¥å…·</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Arial', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
            color: white;
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .container {
            width: 100%;
            max-width: 1000px;
            background: rgba(0, 0, 0, 0.7);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            position: relative;
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #ff00ff, #00ffff);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 0 20px rgba(255, 0, 255, 0.3);
        }
        
        .header p {
            color: #aaa;
            font-size: 1.1rem;
        }
        
        .watermark {
            text-align: center;
            margin: 20px 0;
            color: #00ffff;
            font-size: 0.9rem;
            opacity: 0.8;
        }
        
        .upload-area {
            border: 3px dashed #00ffff;
            border-radius: 15px;
            padding: 40px 20px;
            text-align: center;
            margin: 20px 0;
            background: rgba(0, 255, 255, 0.05);
            transition: all 0.3s;
            cursor: pointer;
        }
        
        .upload-area:hover {
            border-color: #ff00ff;
            background: rgba(255, 0, 255, 0.05);
        }
        
        .upload-area.active {
            border-color: #00ff00;
            background: rgba(0, 255, 0, 0.05);
        }
        
        .upload-icon {
            font-size: 60px;
            margin-bottom: 20px;
            color: #00ffff;
        }
        
        .file-input {
            display: none;
        }
        
        .file-info {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
            display: none;
        }
        
        .file-info.show {
            display: block;
        }
        
        .encryption-types {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 15px;
            margin: 30px 0;
        }
        
        .enc-type {
            background: linear-gradient(135deg, rgba(0, 255, 255, 0.1), rgba(255, 0, 255, 0.1));
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
        }
        
        .enc-type:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
            border-color: #00ffff;
        }
        
        .enc-type.selected {
            border-color: #ff00ff;
            background: linear-gradient(135deg, rgba(255, 0, 255, 0.2), rgba(0, 255, 255, 0.2));
        }
        
        .enc-icon {
            font-size: 30px;
            margin-bottom: 10px;
        }
        
        .sh-icon { color: #00ff00; }
        .lua-icon { color: #0000ff; }
        .cpp-icon { color: #ff9900; }
        .py-icon { color: #ffff00; }
        
        .actions {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
        }
        
        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .encrypt-btn {
            background: linear-gradient(45deg, #ff00ff, #00ffff);
            color: white;
        }
        
        .encrypt-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(255, 0, 255, 0.5);
        }
        
        .encrypt-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
        
        .download-btn {
            background: linear-gradient(45deg, #00ff00, #00cc00);
            color: white;
        }
        
        .download-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.5);
        }
        
        .download-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
        
        .status {
            text-align: center;
            margin: 20px 0;
            padding: 15px;
            border-radius: 10px;
            display: none;
        }
        
        .status.show {
            display: block;
        }
        
        .status.success {
            background: rgba(0, 255, 0, 0.1);
            border: 1px solid #00ff00;
            color: #00ff00;
        }
        
        .status.error {
            background: rgba(255, 0, 0, 0.1);
            border: 1px solid #ff0000;
            color: #ff0000;
        }
        
        .progress-bar {
            width: 100%;
            height: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            margin: 20px 0;
            overflow: hidden;
            display: none;
        }
        
        .progress-bar.show {
            display: block;
        }
        
        .progress {
            width: 0%;
            height: 100%;
            background: linear-gradient(90deg, #ff00ff, #00ffff);
            transition: width 0.5s;
        }
        
        .encrypted-content {
            background: rgba(0, 0, 0, 0.5);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            max-height: 300px;
            overflow-y: auto;
            display: none;
        }
        
        .encrypted-content.show {
            display: block;
        }
        
        .footer {
            text-align: center;
            margin-top: 30px;
            color: #aaa;
            font-size: 0.9rem;
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 0.5; }
            50% { opacity: 1; }
            100% { opacity: 0.5; }
        }
        
        .glow {
            text-shadow: 0 0 10px currentColor;
        }
        
        .floating {
            animation: floating 3s ease-in-out infinite;
        }
        
        @keyframes floating {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="pulse">âœ¨ å¤šæ ¼å¼ä»£ç åŠ å¯†å·¥å…· âœ¨</h1>
            <p>æ”¯æŒ Shellã€Luaã€C/C++ã€Python ç­‰å¤šç§ç¼–ç¨‹è¯­è¨€æ–‡ä»¶çš„å¼ºåŠ å¯†</p>
        </div>
        
        <div class="watermark">
            <p>åŠ å¯†æ°´å°: <span class="glow">https://qlgfwz.github.io/åŠ å¯†.html</span></p>
        </div>
        
        <div class="upload-area" id="uploadArea">
            <div class="upload-icon floating">ğŸ“</div>
            <h2>æ‹–æ”¾æ–‡ä»¶åˆ°æ­¤å¤„ æˆ– ç‚¹å‡»é€‰æ‹©æ–‡ä»¶</h2>
            <p>æ”¯æŒ .sh, .lua, .c, .cpp, .py ç­‰æ ¼å¼</p>
            <input type="file" id="fileInput" class="file-input" accept=".sh,.lua,.c,.cpp,.h,.py">
        </div>
        
        <div class="file-info" id="fileInfo">
            <h3>ğŸ“„ å·²é€‰æ‹©æ–‡ä»¶: <span id="fileName"></span></h3>
            <p>ğŸ“Š æ–‡ä»¶å¤§å°: <span id="fileSize"></span></p>
            <p>ğŸ”¤ æ–‡ä»¶ç±»å‹: <span id="fileType"></span></p>
        </div>
        
        <div class="encryption-types" id="encryptionTypes">
            <div class="enc-type" data-type="sh">
                <div class="enc-icon sh-icon">ğŸš</div>
                <h3>Shell è„šæœ¬</h3>
                <p>.sh æ–‡ä»¶</p>
            </div>
            <div class="enc-type" data-type="lua">
                <div class="enc-icon lua-icon">ğŸŒ™</div>
                <h3>Lua è„šæœ¬</h3>
                <p>.lua æ–‡ä»¶</p>
            </div>
            <div class="enc-type" data-type="cpp">
                <div class="enc-icon cpp-icon">âš™ï¸</div>
                <h3>C/C++ ä»£ç </h3>
                <p>.c, .cpp, .h æ–‡ä»¶</p>
            </div>
            <div class="enc-type" data-type="py">
                <div class="enc-icon py-icon">ğŸ</div>
                <h3>Python ä»£ç </h3>
                <p>.py æ–‡ä»¶</p>
            </div>
        </div>
        
        <div class="actions">
            <button class="btn encrypt-btn" id="encryptBtn" disabled>ğŸ” å¼€å§‹åŠ å¯†</button>
            <button class="btn download-btn" id="downloadBtn" disabled>ğŸ’¾ ä¸‹è½½åŠ å¯†æ–‡ä»¶</button>
        </div>
        
        <div class="progress-bar" id="progressBar">
            <div class="progress" id="progress"></div>
        </div>
        
        <div class="status" id="statusMessage"></div>
        
        <div class="encrypted-content" id="encryptedContent">
            <h3>ğŸ”’ åŠ å¯†å†…å®¹é¢„è§ˆ:</h3>
            <pre id="contentPreview"></pre>
        </div>
        
        <div class="footer">
            <p>Â© 2023 å¤šæ ¼å¼ä»£ç åŠ å¯†å·¥å…· | ä½¿ç”¨ AES-256 ç®—æ³•ç¡®ä¿æœ€é«˜å®‰å…¨æ€§</p>
        </div>
    </div>

    <script>
        // DOM å…ƒç´ 
        const uploadArea = document.getElementById('uploadArea');
        const fileInput = document.getElementById('fileInput');
        const fileInfo = document.getElementById('fileInfo');
        const fileName = document.getElementById('fileName');
        const fileSize = document.getElementById('fileSize');
        const fileType = document.getElementById('fileType');
        const encryptionTypes = document.querySelectorAll('.enc-type');
        const encryptBtn = document.getElementById('encryptBtn');
        const downloadBtn = document.getElementById('downloadBtn');
        const progressBar = document.getElementById('progressBar');
        const progress = document.getElementById('progress');
        const statusMessage = document.getElementById('statusMessage');
        const encryptedContent = document.getElementById('encryptedContent');
        const contentPreview = document.getElementById('contentPreview');
        
        // å…¨å±€å˜é‡
        let selectedFile = null;
        let encryptedData = null;
        let fileExt = '';
        let encryptionType = '';
        
        // æ–‡ä»¶æ‰©å±•ååˆ°åŠ å¯†ç±»å‹çš„æ˜ å°„
        const fileTypeMap = {
            'sh': 'shell',
            'lua': 'lua',
            'c': 'c_cpp',
            'cpp': 'c_cpp',
            'h': 'c_cpp',
            'py': 'python'
        };
        
        // åŠ å¯†ç±»å‹åˆ°åç¼€çš„æ˜ å°„
        const extMap = {
            'sh': 'shell',
            'lua': 'lua',
            'c': 'cpp',
            'cpp': 'cpp',
            'h': 'cpp',
            'py': 'python'
        };
        
        // åŠ å¯†ç±»å‹åˆ°åç§°çš„æ˜ å°„
        const nameMap = {
            'sh': 'Shell',
            'lua': 'Lua',
            'c': 'C++',
            'cpp': 'C++',
            'h': 'C++',
            'py': 'Python'
        };
        
        // åˆå§‹åŒ–äº‹ä»¶ç›‘å¬å™¨
        function initEventListeners() {
            // ç‚¹å‡»ä¸Šä¼ åŒºåŸŸ
            uploadArea.addEventListener('click', () => {
                fileInput.click();
            });
            
            // æ–‡ä»¶é€‰æ‹©å˜åŒ–
            fileInput.addEventListener('change', handleFileSelect);
            
            // æ‹–æ”¾åŠŸèƒ½
            uploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                uploadArea.classList.add('active');
            });
            
            uploadArea.addEventListener('dragleave', () => {
                uploadArea.classList.remove('active');
            });
            
            uploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                uploadArea.classList.remove('active');
                
                if (e.dataTransfer.files.length) {
                    handleFile(e.dataTransfer.files[0]);
                }
            });
            
            // åŠ å¯†æŒ‰é’®ç‚¹å‡»
            encryptBtn.addEventListener('click', encryptFile);
            
            // ä¸‹è½½æŒ‰é’®ç‚¹å‡»
            downloadBtn.addEventListener('click', downloadEncryptedFile);
            
            // åŠ å¯†ç±»å‹é€‰æ‹©
            encryptionTypes.forEach(type => {
                type.addEventListener('click', () => {
                    encryptionTypes.forEach(t => t.classList.remove('selected'));
                    type.classList.add('selected');
                });
            });
        }
        
        // å¤„ç†æ–‡ä»¶é€‰æ‹©
        function handleFileSelect(e) {
            if (e.target.files.length) {
                handleFile(e.target.files[0]);
            }
        }
        
        // å¤„ç†æ–‡ä»¶
        function handleFile(file) {
            selectedFile = file;
            fileExt = file.name.split('.').pop().toLowerCase();
            
            // æ£€æŸ¥æ–‡ä»¶ç±»å‹æ˜¯å¦æ”¯æŒ
            if (!fileTypeMap[fileExt]) {
                showStatus(`ä¸æ”¯æŒçš„æ–‡ä»¶ç±»å‹: .${fileExt}`, 'error');
                resetUI();
                return;
            }
            
            // è‡ªåŠ¨é€‰æ‹©å¯¹åº”çš„åŠ å¯†ç±»å‹
            encryptionTypes.forEach(type => {
                if (type.dataset.type === fileExt) {
                    type.classList.add('selected');
                } else {
                    type.classList.remove('selected');
                }
            });
            
            // æ˜¾ç¤ºæ–‡ä»¶ä¿¡æ¯
            fileName.textContent = file.name;
            fileSize.textContent = formatFileSize(file.size);
            fileType.textContent = `${nameMap[fileExt]} æ–‡ä»¶ (.${fileExt})`;
            fileInfo.classList.add('show');
            
            // å¯ç”¨åŠ å¯†æŒ‰é’®
            encryptBtn.disabled = false;
            downloadBtn.disabled = true;
            
            showStatus(`å·²é€‰æ‹©æ–‡ä»¶: ${file.name}ï¼Œå‡†å¤‡åŠ å¯†`, 'success');
        }
        
        // åŠ å¯†æ–‡ä»¶
        function encryptFile() {
            if (!selectedFile) {
                showStatus('è¯·å…ˆé€‰æ‹©æ–‡ä»¶', 'error');
                return;
            }
            
            showStatus('æ­£åœ¨åŠ å¯†æ–‡ä»¶...', 'success');
            progressBar.classList.add('show');
            encryptBtn.disabled = true;
            
            // æ¨¡æ‹ŸåŠ å¯†è¿›åº¦
            let progressValue = 0;
            const progressInterval = setInterval(() => {
                progressValue += 10;
                progress.style.width = `${progressValue}%`;
                
                if (progressValue >= 100) {
                    clearInterval(progressInterval);
                    
                    const reader = new FileReader();
                    
                    reader.onload = function(e) {
                        const content = e.target.result;
                        
                        // åˆ›å»ºæ°´å°
                        const watermark = `/*\n * åŠ å¯†æ°´å°: https://qlgfwz.github.io/åŠ å¯†.html\n * åŠ å¯†æ—¶é—´: ${new Date().toLocaleString()}\n * åŠ å¯†ç±»å‹: ${nameMap[fileExt]}\n */\n\n`;
                        
                        // ä½¿ç”¨CryptoJSè¿›è¡ŒAESåŠ å¯†
                        const encrypted = CryptoJS.AES.encrypt(content, generateEncryptionKey()).toString();
                        
                        // ç»„åˆæœ€ç»ˆåŠ å¯†å†…å®¹
                        encryptedData = watermark + encrypted;
                        
                        // æ˜¾ç¤ºåŠ å¯†å†…å®¹é¢„è§ˆ
                        contentPreview.textContent = encryptedData.substring(0, 500) + 
                            (encryptedData.length > 500 ? '...' : '');
                        encryptedContent.classList.add('show');
                        
                        showStatus(`âœ… ${nameMap[fileExt]} æ–‡ä»¶åŠ å¯†å®Œæˆï¼`, 'success');
                        downloadBtn.disabled = false;
                    };
                    
                    reader.readAsText(selectedFile);
                }
            }, 200);
        }
        
        // ç”ŸæˆåŠ å¯†å¯†é’¥
        function generateEncryptionKey() {
            const timestamp = Date.now().toString();
            const randomStr = Math.random().toString(36).substring(2, 15);
            return CryptoJS.SHA256(timestamp + randomStr + selectedFile.name).toString();
        }
        
        // ä¸‹è½½åŠ å¯†æ–‡ä»¶
        function downloadEncryptedFile() {
            if (!encryptedData) {
                showStatus('æ²¡æœ‰å¯ä¸‹è½½çš„åŠ å¯†å†…å®¹', 'error');
                return;
            }
            
            // ç”Ÿæˆæ–‡ä»¶åï¼šåŸæ–‡ä»¶å.åŠ å¯†åç¼€.å·²åŠ å¯†
            const originalName = selectedFile.name.split('.')[0];
            const encryptedExt = extMap[fileExt];
            const encryptedFileName = `${originalName}.${encryptedExt}.å·²åŠ å¯†`;
            
            const blob = new Blob([encryptedData], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            
            a.href = url;
            a.download = encryptedFileName;
            document.body.appendChild(a);
            a.click();
            
            // æ¸…ç†
            setTimeout(() => {
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            }, 100);
            
            showStatus(`æ–‡ä»¶å·²ä¸‹è½½: ${encryptedFileName}`, 'success');
        }
        
        // æ˜¾ç¤ºçŠ¶æ€æ¶ˆæ¯
        function showStatus(message, type) {
            statusMessage.textContent = message;
            statusMessage.className = `status show ${type}`;
        }
        
        // é‡ç½®UI
        function resetUI() {
            encryptBtn.disabled = true;
            downloadBtn.disabled = true;
            fileInfo.classList.remove('show');
            encryptedContent.classList.remove('show');
            progressBar.classList.remove('show');
            progress.style.width = '0%';
            selectedFile = null;
            encryptedData = null;
            
            // æ¸…é™¤åŠ å¯†ç±»å‹é€‰æ‹©
            encryptionTypes.forEach(type => type.classList.remove('selected'));
        }
        
        // æ ¼å¼åŒ–æ–‡ä»¶å¤§å°
        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', initEventListeners);
    </script>
</body>
</html>

