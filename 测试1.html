<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>启动pubg</title>
  <style>
    /* 原有样式保留，新增悬浮窗样式 */
    /* 悬浮窗容器 - 可拖动、置顶 */
    #floatWindow {
      position: fixed;
      top: 50px;
      left: 50px;
      width: 180px;
      height: 220px;
      background-color: #ffffff;
      border-radius: 8px;
      box-shadow: 0 0 15px rgba(0,0,0,0.3);
      z-index: 9999;
      padding: 10px;
      box-sizing: border-box;
      user-select: none;
      cursor: move;
    }
    /* 悬浮窗顶部图标 */
    #floatIcon {
      width: 30px;
      height: 30px;
      position: absolute;
      top: 8px;
      left: 8px;
      border-radius: 4px;
    }
    /* 右下角缩放按钮 */
    #resizeBtn {
      width: 20px;
      height: 20px;
      position: absolute;
      bottom: 5px;
      right: 5px;
      background-image: url('https://mpimg.cn/view.php/c80860b18137d30f5b4b826359232a3e.png');
      background-size: cover;
      cursor: se-resize;
    }
    /* 功能按钮样式 */
    .func-btn {
      width: 60px;
      height: 35px;
      line-height: 35px;
      text-align: center;
      background-color: #f5f5f5;
      border: 1px solid #ddd;
      border-radius: 4px;
      margin: 8px auto;
      cursor: pointer;
      transition: background-color 0.2s;
    }
    .func-btn.active {
      background-color: #4CAF50;
      color: #fff;
    }
    /* 页数指示器 */
    #pageIndicator {
      position: absolute;
      top: 50%;
      left: 5px;
      transform: translateY(-50%);
      color: #666;
      font-size: 12px;
    }
  </style>
</head>
<body>
  <!-- 原有页面内容保留 -->
  <canvas id="canvas"></canvas>
  <!-- 新增悬浮窗 DOM -->
  <div id="floatWindow">
    <img id="floatIcon" src="https://mpimg.cn/view.php/c80860b18137d30f5b4b826359232a3e.png" alt="icon">
    <div id="pageIndicator">第1页</div>
    <div style="margin-top: 40px; text-align: center;">
      <div class="func-btn" onclick="toggleBtn(this)">加速</div>
      <div class="func-btn" onclick="toggleBtn(this)">透视</div>
      <div class="func-btn" onclick="toggleBtn(this)">缩写</div>
      <div class="func-btn" onclick="toggleBtn(this)">子弹追踪</div>
    </div>
    <div id="resizeBtn"></div>
  </div>

  <script>
    // 原有 JS 代码保留
    // ========== 悬浮窗核心逻辑 ==========
    const floatWindow = document.getElementById('floatWindow');
    const resizeBtn = document.getElementById('resizeBtn');
    let isDragging = false;
    let dragStartX, dragStartY, winStartX, winStartY;
    let isResizing = false;
    let resizeStartX, resizeStartY, winStartW, winStartH;

    // 1. 拖动功能
    floatWindow.addEventListener('mousedown', (e) => {
      if(e.target === resizeBtn) return; // 点击缩放按钮不触发拖动
      isDragging = true;
      dragStartX = e.clientX;
      dragStartY = e.clientY;
      winStartX = floatWindow.offsetLeft;
      winStartY = floatWindow.offsetTop;
      floatWindow.style.opacity = '0.8';
    });
    document.addEventListener('mousemove', (e) => {
      if(!isDragging) return;
      const dx = e.clientX - dragStartX;
      const dy = e.clientY - dragStartY;
      floatWindow.style.left = `${winStartX + dx}px`;
      floatWindow.style.top = `${winStartY + dy}px`;
    });
    document.addEventListener('mouseup', () => {
      isDragging = false;
      floatWindow.style.opacity = '1';
    });

    // 2. 缩放功能
    resizeBtn.addEventListener('mousedown', (e) => {
      e.stopPropagation(); // 避免触发拖动
      isResizing = true;
      resizeStartX = e.clientX;
      resizeStartY = e.clientY;
      winStartW = floatWindow.offsetWidth;
      winStartH = floatWindow.offsetHeight;
    });
    document.addEventListener('mousemove', (e) => {
      if(!isResizing) return;
      const dx = e.clientX - resizeStartX;
      const dy = e.clientY - resizeStartY;
      // 限制最小尺寸
      const newW = Math.max(120, winStartW + dx);
      const newH = Math.max(160, winStartH + dy);
      floatWindow.style.width = `${newW}px`;
      floatWindow.style.height = `${newH}px`;
    });
    document.addEventListener('mouseup', () => {
      isResizing = false;
    });

    // 3. 功能按钮切换颜色
    function toggleBtn(btn) {
      btn.classList.toggle('active');
    }
  </script>
</body>
</html>

